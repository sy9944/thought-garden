## TODO
- [x] srcディレクトリを作成する
- [x] Laravelをインストール
- [x] docker立ち上げ
  - [x] ディレクトリ作成
  - [x] Dockerfile を書く
  - [x] nginx 設定を書く
  - [x] docker-compose.yml を書く
  - [x] build & up
- [ ] 気になっていること解決
- [ ] 公式イメージ読む
## INFO
### mkcert
ローカルにHTTPS証明書を簡単に作成できるツール

業務ではDocker/配下に置かれている。

### OAuth
他サービスのログインを安全に借りる仕組み

「Google でログイン」など

### Laravelインストール
```bash
composer create-project laravel/laravel src
```
```bash
composer create-project <パッケージ> <ディレクトリ名>
```

`laravel/laravel` はLaravelの雛形プロジェクト

事前にディレクトリ名があればその配下にプロジェクトが作成される

### srcディレクトリ作成
```bash
mkdir src
```

### dockerディレクトリ作成
```bash
mkdir -p docker/php docker/nginx
```

### Dockerfile
```dockerfile
FROM php:8.2-fpm

RUN apt-get update \
    && apt-get install -y \
        git \
        zip \
        unzip \
    && docker-php-ext-install pdo_mysql

WORKDIR /var/www/html
```

### nginx
```nginx
server {
    listen 80;
    root /var/www/html/public;

    index index.php;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ \.php$ {
        fastcgi_pass php:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }
}
```

### docker-compose.yml
```yaml
version: "3.9"

services:
  php:
    build: ./docker/php
    volumes:
      - ./src:/var/www/html

  nginx:
    image: nginx:alpine
    ports:
      - "8080:80"
    volumes:
      - ./src:/var/www/html
      - ./docker/nginx/default.conf:/etc/nginx/conf.d/default.conf
    depends_on:
      - php
```

### build & up
```bash
docker compose up -d --build
```

## 気になっていること
- [x] フロントはvue.jsで作りたいけど、どうしたらいいんだろう？
  - まだ考える必要なし。今はDockerでLaravelが動かせるか確認することが大事
- [x] `mkdir -p docker/php docker/nginx` -p は何の意味？
  - 親ディレクトリも一緒に作るオプション
  - parents(親)の略
- [ ] `Dockerfile`の雛形はどこにある？
  - 雛形は存在しない。公式イメージを参考に独自にカスタムする
  - [ ] そもそも、イメージとは？
    - コンテナを作るための設計図(テンプレート)
    - イメージ=レシピ、コンテナ=実際に作られた料理
    - Dockerがやっていること「イメージを元にコンテナを作って、それを起動する」
    - `FROM php:8.2-fpm` 「PHP8.2 + php-fpmが入った公式が用意したLinux環境を使う」という意味になる
  - [ ] php-fpmって何？
  - [ ] なんでLinux環境とわかるの？
- `docker/nginx/default.conf`の雛形はある？
- `docker-compose.yml`の雛形はある？
- `docker compose up -d --build` up と build の違いは？